#: import FadeTransition kivy.uix.screenmanager.FadeTransition

Windows:
    MainScreen:
    PassengerSP:
    PassengerLog:
    PassengerHome:
    ForgotpwdPas:
    ChpwdPass:
    AdvanceBooking:
    Profileviewer:

<MainScreen>:
    name: "main"
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    orientation: 'vertical'
    GridLayout:
        cols: 1
        Label:
            text: "  Welcome to EzCabz\n Have a wonderful day!"
            font_size: 36
            font: 'consalas'
            size_hint: 1, 0.4
        BoxLayout:
            orientation: 'vertical'
            padding: [30]
            spacing: 20
            size_hint: 1, 0.4
            RoundedButton:
                text: "SignUp"
                size_hint: 0.2, 0.1
                on_release: 
                	root.manager.transition = FadeTransition()
                	app.root.current = "Psignup"
                
            RoundedButton:
                text: "Login"
                size_hint: 0.2, 0.1
                on_release: 
                	root.manager.transition = FadeTransition()
                	app.root.current = "Plogin"

<PassengerLog>:
    name: 'Plogin'
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    orientation: 'vertical'
    AnchorLayout:
        anchor_x: 'center'
        spacing: 40
        BoxLayout:
            orientation: 'vertical'
            padding: 50,50
            spacing: 40
            Label:
                text: "Welcome Back"
                font_size: 36
            GridLayout:
                cols: 2
                Label:
                    text: 'Email'
                TextInput:
                    id: email
                    multiline: False
                    on_double_tap: root.__recent__(email, pwd)
                Label:
                    text: "Password"
                TextInput:
                    id: pwd
                    password: True
                    allow_copy: False
                Label:
                    text: "OTP"
                    color: 0,0,0
                TextInput:
                    id: otp
                    multiline: False
                    password: True
                    #background_color: 0,0,0,0
                    #foreground_color: 1,1,1,1
            BoxLayout:
                orientation: 'horizontal'
                spacing: 20
                padding: [30]
                Button:
                    text: "Go back"
                    size_hint: 0.5, 0.3
                    on_release: app.root.current = 'main'
                Button:
                    text: "Send OTP"
                    size_hint: 0.5, 0.3
                    on_press: root.__submit__(email.text, pwd.text, errormsg)
                Label:
                    id: errormsg
                    text: ''
                Button:
                    text: 'Forgot Password'
                    size_hint: 0.8, 0.3
                    on_release: app.root.current= 'FPpass'
                Button:
                    text: 'Submit'
                    size_hint: 0.5, 0.3
                    on_press: root.__verify__(otp.text, errormsg)

<PassengerSP>:
    name: 'Psignup'
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    orientation: 'vertical'
    BoxLayout:
        orientation: 'vertical'
        spacing: 20
        padding: [40]
        Label:
            text: 'Please fill in all the details correctly\n  to make your rides even more comfy'
            size_hint: 1, 0.2
        GridLayout:
            size_hint: 1, 0.8
            cols: 2
            spacing: 20
            Label:
                text: "Name"
            TextInput:
                id: name
                multiline: False
                hint_text: "your name"
            Label:
                text: "Email ID"
            TextInput:
                id: email
                multiline: False
                hint_text: "example@gmail.com"
            Label:
                text: "Phone Number"
            TextInput:
                id: phone
                multilline: False
                hint_text: "1234567890"
            Label:
                text: "Password"
            TextInput:
                id: pwd
                password: True
                multiline: False
            Label:
                text: "Confirm password"
            TextInput:
                id: cpwd
                password: True
                multiline: False
            Label:
                text: "OTP"
            TextInput:
                id: otp
                multiline: False
                password: True
        BoxLayout:
            orientation: 'horizontal'
            spacing: 20
            size_hint: 1, 0.2
            Button:
                text: 'Send OTP'
                size_hint: 0.5, 0.3
                on_release: 
                    root.__enter_data__(name.text, phone.text,email.text, pwd.text, cpwd.text, errormsg)
            Label:
                id: errormsg
                size_hint: 0.5, 0.3
                text: 'Please fill all fields\n      correctly.'
                
            Button:
                text: "Submit"
                size_hint: 0.5, 0.3
                on_press: 
                    root.verify_otp(otp.text, errormsg)
                    app.root.current = "Plogin"
            Button:
                text: "Go Back"
                size_hint: 0.5, 0.3
                on_release:
                    app.root.current = "main"

<ForgotpwdPas>:
    name: 'FPpass'
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        spacing: 30
        padding: [30]
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.8, 0.8
            pos_hint_x: {'center_x'}
            Label:
                text: 'Enter Your details'
            GridLayout:
                cols: 2
                spacing: 20
                size_hint: 0.8, 0.7
                Label:
                    text: 'Email ID'
                TextInput:
                    id: email
                    size_hint: 1, 0.5
                Label:
                    text: 'OTP'
                TextInput:
                    id: otp
                    size_hint: 1, 0.5
                    password: True
            BoxLayout:
                orientation: 'horizontal'
                spacing: 10
                Button:
                    text: 'Go Back'
                    size_hint: 0.5, 0.3
                    on_release: app.root.current= 'Plogin'
                Button:
                    text: 'Send OTP'
                    size_hint: 0.5, 0.3
                    on_press: root.__verify__(email.text, errormsg)
                Label:
                    id: errormsg
                    text: ''
                Button:
                    text: 'Submit'
                    size_hint: 0.5, 0.3
                    on_press: root.change_pwd(otp.text, errormsg)

<Profileviewer>:
    name: 'profile'
    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.5
            spacing: 20
            padding: [30]
            pos_hint_x: {'center_x'}
            pos_hint_y: {'center_y'}
            Image:
                source: 'profile.png'
                size_hint: 0.3, 1
            BoxLayout:
                orientation: 'vertical'
                size_hint: 0.5,1
                Label:
                    id: name
                    text: ''
                    pos_hint_x: {'left': 1}
                    font_size: 36
                    markup: True
                Label:
                    id: email
                    text: ''
                    pos_hint_x: {'left': 1}
                    font_size: 24
                Label:
                    id: phone
                    text: ''
                    font_size: 20
                    pos_hint_x: {'left': 1}
            BoxLayout:
                orientation: 'vertical'
                size_hint: 0.2, 1
                Button:
                    text: 'Go Back'
                    size_hint: 0.5, 0.2
                    pos_hint: {'center_x': 1, 'top': 1}
                    on_release: app.root.current= 'Phome'
                Label:
                    text: ''
                    size_hint: 0.5, 0.8
        ScrollView:
            id: ridelay
            do_scroll_y: True
            do_scroll_x: False
            size_hint: 1, 0.5

<ChpwdPass>:
    name: 'chpwdps'
    canvas:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'background.jpg'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        size_hint: 0.8, 0.8
        spacing: 10
        BoxLayout:
            orientation: 'vertical'
            pos_hint_x: {'center_x'}
            pos_hint_y: {'center_y'}
            Label:
                text: 'Password Reset'
            GridLayout:
                cols: 2
                spacing: 10
                Label:
                    text: 'New Password'
                TextInput:
                    id: newpwd
                    multiline: False
                    password: True
                Label:
                    text: 'Confirm New Password'
                TextInput:
                    id: conpwd
                    multiline: False
                    password: True
                    on_text_validate: root._check_pwd_(newpwd.text, conpwd.text, errormsg)
            BoxLayout:
                orientation: 'horizontal'
                spacing: 10
                Button:
                    text: 'Go Back'
                    size_hint: 0.8, 0.4
                    on_release: app.root.current= 'FPpass'
                Label:
                    id: errormsg
                    text: ''
                Button:
                    text: 'Submit'
                    size_hint: 0.8, 0.4
                    on_release: root._submit_(newpwd.text, conpwd.text, errormsg)


<PassengerHome>:
    name: 'Phome'
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint: 0.1, 1
            Button:
                text: 'Profile'
                size_hint: 1, 0.1
                on_release: app.root.current= 'profile'
            Button:
                text: 'Advanced\n Booking'
                size_hint: 1, 0.1
                on_release: app.root.current= 'advancebook'
            Label:
                size_hint: 1, 0.7
                text: ''
            Button:
                text: 'Logout'
                size_hint: 1, 0.1
                on_release: app.root.current= 'main'
        BoxLayout:
            MapView:
                id: passmap
                size_hint: 0.6, 1
                zoom: 12
                lat: 13.0827
                lon: 80.2707
                MapMarker:
                    id: pickupmarker
                    lat: 13.069344
                    lon: 80.195203
                    size: '2dp', '2dp'
                    size_hint: 0.1,0.1
                    source: "pickup_pointer.png"
                MapMarker:
                    id: destinationmarker
                    lat: 13.0827
                    lon: 80.2707
                    size: '2dp', '2dp'
                    size_hint: 0.1, 0.1
                    source: "destination_pointer.png"
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True 
            size_hint: 0.3, 1
            BoxLayout:
                spacing: 10
                padding: [10]
                orientation: 'vertical'
                TextInput:
                    id: pickup
                    hint_text: 'Enter Pick Up Location(double tap to get suggestions)'
                    multiline: False
                    size_hint: 1, 0.2
                    on_double_tap: root.on_text_pickup(self)
                TextInput:
                    id: drop
                    hint_text: 'Enter Destination(double tap to get suggestions)'
                    multiline: False
                    size_hint: 1, 0.2
                    on_double_tap: root.on_text_destination(self)
                Label:
                    id: notify
                    text: 'double tap the text boxes\n to get suggestions'
                    size_hint: 1, 0.2
                RoundedButton:
                    id: suggest1
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 0, notify)
                RoundedButton:
                    id: suggest2
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 1, notify)
                RoundedButton:
                    id: suggest3
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 2, notify)
                Label:
                    id: vehicle
                    text: ''
                    size_hint: 1, 0.2
                AnchorLayout:
                    anchor_y: 'bottom' 
                    GridLayout:
                        size_hint: 1, 1
                        cols: 4
                        Button:
                            id: bike
                            background_normal: 'Bike.png'
                            background_down: 'Bike.png'
                            #text: 'BIKE'
                            font_size: 20
                            size_hint: 0.20, None
                            on_release: root.set_option('bike')
                        Button:
                            id: auto
                            background_normal: 'Auto.png'
                            background_down: 'Auto.png'
                            #text: 'AUTO'
                            font_size: 20
                            size_hint: 0.25, None 
                            on_release: root.set_option('auto')
                        Button:
                            id: mini
                            background_normal: 'Mini-Car.png'
                            background_down: 'Mini-Car.png'
                            #text: 'SEDAN'
                            font_size: 20
                            size_hint: 0.30, None
                            on_release: root.set_option('sedan')
                        Button:
                            id: suv
                            background_normal: 'SUV.png'
                            background_down: 'SUV.png'
                            #text: 'SUV'
                            font_size: 20
                            size_hint: 0.25, None
                            on_release: root.set_option('suv')
                        Label:
                            text: 'BIKE'
                            size_hint: 0.20, None
                        Label:
                            text: 'AUTO'
                            size_hint: 0.25, None
                        Label:
                            text: 'SEDAN'
                            size_hint: 0.30, None
                        Label:
                            text: 'SUV'
                            size_hint: 0.25, None
                Label:
                    id: price_text
                    text: ''
                    font_size: 20
                BoxLayout:
                    id: final
                    orientation: 'horizontal'    
                    Button:
                        id: price
                        text: 'Check Price'
                        size_hint: 1, 0.2
                        on_release: root.generate_price()
                    Button:
                        id: book
                        text: 'Book Now'
                        size_hint: 1, 0.2
                        on_release: root.book_now()

<AdvanceBooking>:
    name: 'advancebook'
    BoxLayout:
        orientation: 'horizontal'
        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint: 0.1, 1
            Button:
                text: 'Profile'
                size_hint: 1, 0.1
                on_release: app.root.current= 'profile'
            Button:
                text: 'Book Cab Now'
                size_hint: 1, 0.1
                on_release: app.root.current= 'Phome'
            Label:
                size_hint: 1, 0.7
                text: ''
            Button:
                text: 'Logout'
                size_hint: 1, 0.1
                on_release: app.root.current= 'main'
        BoxLayout:
            MapView:
                id: passmap
                size_hint: 0.6, 1
                zoom: 12
                lat: 13.0827
                lon: 80.2707
                MapMarker:
                    id: pickupmarker
                    lat: 13.069344
                    lon: 80.195203
                    size: '2dp', '2dp'
                    size_hint: 0.1,0.1
                    source: "pickup_pointer.png"
                MapMarker:
                    id: destinationmarker
                    lat: 13.0827
                    lon: 80.2707
                    size: '2dp', '2dp'
                    size_hint: 0.1, 0.1
                    source: "destination_pointer.png"
        ScrollView:
            id: right_screen
            do_scroll_x: False
            do_scroll_y: True 
            size_hint: 0.3, 1
            BoxLayout:
                spacing: 10
                padding: [10]
                orientation: 'vertical'
                TextInput:
                    id: pickup
                    hint_text: 'Enter Pick Up Location(double tap to get suggestions)'
                    multiline: False
                    size_hint: 1, 0.2
                    on_double_tap: root.on_text_pickup(self)
                    
                TextInput:
                    id: drop
                    hint_text: 'Enter Destination(double tap to get suggestions)'
                    multiline: False
                    size_hint: 1, 0.2
                    on_double_tap: root.on_text_pickup(self)
                Label:
                    id: notify
                    text: 'double tap the text boxes\n to get suggestions'
                    size_hint: 1, 0.2
                RoundedButton:
                    id: suggest1
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 0, notify)
                RoundedButton:
                    id: suggest2
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 1, notify)
                RoundedButton:
                    id: suggest3
                    text: ''
                    size_hint: 1, 0.15
                    on_release: root.select_option(self.text, 2, notify)

                Label:
                    id: vehicle
                    text: ''
                    size_hint: 1, 0.2
                TextInput:
                    id: date
                    hint_text: 'Date(format: DD-MM-YYYY)'
                    size_hint: 1, 0.2
                TextInput:
                    id: time
                    hint_text: 'Time(24hr format: HH:MM)'
                    size_hint: 1,0.2
                AnchorLayout:
                    anchor_y: 'bottom'
                    GridLayout:
                        size_hint: 1, 1
                        cols: 4
                        Button:
                            id: bike
                            background_normal: 'Bike.png'
                            background_down: 'Bike.png'
                            #text: 'BIKE'
                            font_size: 20
                            size_hint: 0.20, None
                            on_release: root.set_option('bike')
                        Button:
                            id: auto
                            background_normal: 'Auto.png'
                            background_down: 'Auto.png'
                            #text: 'AUTO'
                            font_size: 20
                            size_hint: 0.25, None
                            on_release: root.set_option('auto')
                        Button:
                            id: mini
                            background_normal: 'Mini-Car.png'
                            background_down: 'Mini-Car.png'
                            #text: 'SEDAN'
                            font_size: 20
                            size_hint: 0.30, None
                            on_release: root.set_option('sedan')
                        Button:
                            id: suv
                            background_normal: 'SUV.png'
                            background_down: 'SUV.png'
                            #text: 'SUV'
                            font_size: 20
                            size_hint: 0.25, None
                            on_release: root.set_option('suv')
                        Label:
                            text: 'BIKE'
                            size_hint: 0.25, 0.5
                        Label:
                            text: 'AUTO'
                            size_hint: 0.25, 0.5
                        Label:
                            text: 'SEDAN'
                            size_hint: 0.25, 0.5
                        Label:
                            text: 'SUV'
                            size_hint: 0.25, 0.5
                Label:
                    id: price_text
                    text: ''
                    font_size: 20
                BoxLayout:
                    id: final
                    orientation: 'horizontal'    
                    Button:
                        id: price
                        text: 'Check Price'
                        size_hint: 1, 0.2
                        on_release: root.generate_price()
                    Button:
                        id: book
                        text: 'Book Now'
                        size_hint: 1, 0.2
                        on_release: root.book_advanced()


<PassMenu@DropDown>:
    Button:
        text: 'Profile'
    
    Button:
        text: 'Your Rides'
    
    Button:
        text: 'Logout'

<RoundedButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    canvas.before:
        Color:
            rgba: (50/255, 47/255, 80/255,0)
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [58]


# <RoundedButton@Button>:
#     background_color: (0,0,0,0)
#     background_normal: ''
#     canvas.before:
#         Color:
#             rgba: (50/255, 47/255, 80/255,0)
#         Rectamgle:
#             size: self.size
#             pos: self.pos
#             radius: [58]